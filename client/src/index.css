@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
    box-sizing: border-box;
  }

  html {
    color-scheme: dark;
  }
  
  body {
    min-height: 100dvh;
    overscroll-behavior: none;
    background: #1d1d1f;
    color: #f5f5f7;
    /* Prevent iOS rubber-band scroll on main body */
    position: fixed;
    width: 100%;
    overflow: hidden;
  }

  #root {
    width: 100%;
    height: 100dvh;
    overflow: hidden;
  }

  /* Thin scrollbar matching dark theme (desktop only) */
  @media (hover: hover) {
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #48484a; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #636366; }
  }

  /* Hide scrollbar on mobile for cleaner look */
  @media (hover: none) {
    ::-webkit-scrollbar { display: none; }
    * { scrollbar-width: none; }
  }

  ::selection { background: rgba(10, 132, 255, 0.35); }
}

@layer components {
  /* Buttons */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-lg
           bg-accent text-white font-medium text-sm
           hover:bg-accent-hover active:scale-[0.97]
           transition-all duration-150 ease-out
           disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-3 py-1.5 rounded-lg
           text-label-secondary text-sm font-medium
           hover:bg-app-surface active:scale-[0.97]
           transition-all duration-150 ease-out;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-lg
           bg-red-500/10 text-red-400 font-medium text-sm
           hover:bg-red-500/20 active:scale-[0.97]
           transition-all duration-150 ease-out
           border border-red-500/20;
  }

  .input-field {
    @apply w-full px-4 py-3 rounded-lg bg-app-surface border border-app-border
           text-sm text-label-primary placeholder-label-tertiary
           focus:outline-none focus:ring-2 focus:ring-accent/40 focus:border-accent
           transition-all duration-150;
  }

  /* Sidebar nav item */
  .nav-item {
    @apply flex items-center gap-3 px-3 py-[6px] rounded-lg text-[13px] font-medium
           transition-colors duration-100 cursor-pointer select-none;
  }
  .nav-item:hover { @apply bg-white/5; }
  .nav-item.active { @apply bg-accent/15 text-accent; }
  .nav-item .nav-icon { @apply w-[18px] h-[18px] opacity-70; }
  .nav-item.active .nav-icon { @apply opacity-100 text-accent; }
}

/* ====================== PHOTO GRID ====================== */
.photo-grid {
  display: grid;
  gap: 2px;
  grid-template-columns: repeat(var(--grid-cols, 4), 1fr);
}

/* ====================== SKELETON SHIMMER ====================== */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.skeleton {
  background: linear-gradient(90deg, #2c2c2e 25%, #3a3a3c 37%, #2c2c2e 63%);
  background-size: 200% 100%;
  animation: shimmer 1.8s ease-in-out infinite;
}

/* ====================== CAMERA ====================== */
.viewfinder-grid {
  background-image:
    linear-gradient(rgba(255,255,255,.12) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.12) 1px, transparent 1px);
  background-size: 33.33% 33.33%;
}

/* ====================== RANGE SLIDER ====================== */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  height: 3px;
  background: #48484a;
  border-radius: 2px;
  outline: none;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #f5f5f7;
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,0,0,0.4);
}

/* ====================== SAFE AREA UTILITIES ====================== */
.pt-safe { padding-top: env(safe-area-inset-top, 0px); }
.pb-safe { padding-bottom: env(safe-area-inset-bottom, 0px); }
.pl-safe { padding-left: env(safe-area-inset-left, 0px); }
.pr-safe { padding-right: env(safe-area-inset-right, 0px); }
.mb-safe { margin-bottom: env(safe-area-inset-bottom, 0px); }
.bottom-safe { bottom: env(safe-area-inset-bottom, 0px); }

/* ====================== BOTTOM TAB BAR (mobile) ====================== */
.tab-bar {
  padding-bottom: env(safe-area-inset-bottom, 8px);
}
.tab-item {
  @apply flex flex-col items-center justify-center gap-0.5 py-1 px-2 text-label-tertiary;
  min-width: 64px;
  -webkit-tap-highlight-color: transparent;
}
.tab-item.active { @apply text-accent; }
.tab-item .tab-icon { @apply w-[22px] h-[22px]; }
.tab-item .tab-label { @apply text-[10px] font-medium; }

/* ====================== INSTALL PROMPT ====================== */
.install-banner {
  animation: slideUp 0.35s ease-out;
}
